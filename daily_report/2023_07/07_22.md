# 日報(2023/7/22)

## 本日の目標（TODO 目標/できるようになりたいこと）

- ~~オリジナルプロダクト用ログイン機能の開発（金曜までに完成）~~
- ~~カレンダー機能の作成(React 側で作成 火曜日までに完成)~~
- ~~カレンダーに CRUD 機能の追加(Rails の API 作成 木曜までに)~~
- ~~提出されたカレンダーを表示する PC 用カレンダーの front とその API 作成~~
- ~~docker 環境での AWS デプロイ方法の調査~~
- ECS 使用して docker 環境をデプロイする（月曜日まで）

## 学習時間（Hour）

- today:10h
- totalHour: 850h
- perWeekHour: 56h :61h :62h :64h :51h :61h :64h :66h :54h :67h :56h :60h :65h :63h :56h
- totalDay: 102day

## 目標振り返り（TODO 進捗/できるようになりたいこと振り返り）

- RDS の作成
- ALB の設置
- DNS の設定
- ECS のタスクとサービスの実行

## 詰まっていること（実現したいこと/現状/行ったこと/仮説）

- ECS でコンテナが起動できない。
- おそらく該当のエラー内容 → "stoppedReason": "ResourceInitializationError: unable to pull secrets or registry auth: execution resource retrieval failed: unable to retrieve secrets from ssm: service call has been retried
- 上記踏まえた対応として、ロールポリシーに ssm の設定の追加。
- だが ssm 使用する様な設定はしておらずタスク定義の環境変数設定していたのみだったので、環境変数削除しサービス起動 → 同じくサーキットブレイカーと言うエラー発生しロールバック発生
- タスク定義の環境設定の際に 86/64 になっており、docker 環境は alpine で実行していたので AWS の環境の方を arm64 に変更 → 変化なし。

## 学んだこと（新しい気付き、学び）

- alpine での起動では arm64 環境になること
- タスク定義で環境変数持たせることできるがセキュリティ的には SSM 使用すべきと言うこと

## 感想（一日の感想、雑談）

- 完全に詰まった。インフラの苦手意識加速する。。。AWS のエラー色んなところに出るし裏側で何が起きてるか分かりにくいから対応難しい。
- 普通に丸一日 AWS 触って調べて進めてたが進捗一気に悪くなった。月曜までに終わらせる自信無くなってきた。

## 明日の目標（TODO 目標/できるようになりたいこと）

- ~~オリジナルプロダクト用ログイン機能の開発（金曜までに完成）~~
- ~~カレンダー機能の作成(React 側で作成 火曜日までに完成)~~
- ~~カレンダーに CRUD 機能の追加(Rails の API 作成 木曜までに)~~
- ~~提出されたカレンダーを表示する PC 用カレンダーの front とその API 作成(MAX 金曜日まで)~~
- ~~docker 環境での AWS デプロイ方法の調査~~
- ECS 使用して docker 環境をデプロイする（月曜日まで）
